<div class="p-3">
  <div class="card">
    <div class="card-body">
      <div class="mb-3">
        <label style="display: block; font-weight:bold" class="form-label mb-2">
          Your question:
        </label>
        
        <div class="input-group">
          <input 
            [(ngModel)]="query"
            (keydown.enter)="askAgent()"
            [disabled]="progress"
            class="form-control"
            placeholder="Posez votre question...">
          
          <button 
            (click)="askAgent()"
            [disabled]="!query || progress"
            class="btn btn-primary">
            @if (progress) {
              <span class="spinner-border spinner-border-sm me-2"></span>
            }
            Send
          </button>
        </div>
      </div>
    </div>

    <!-- Zone de réponse avec animation -->
    @if (response || progress) {
      <div class="card-body border-top">
        @if (progress && !response) {
          <div class="text-center py-4">
            <div class="spinner-border text-primary mb-2" role="status">
              <span class="visually-hidden">Chargement...</span>
            </div>
            <p class="text-muted">L'IA génère la réponse...</p>
          </div>
        }
        
        @if (response) {
          <div class="response-container">
            <div class="alert alert-light mb-0">
              <markdown [data]="response"></markdown>
            </div>
            
            @if (progress) {
              <div class="streaming-indicator mt-2">
                <span class="badge bg-primary">
                  <span class="spinner-grow spinner-grow-sm me-1"></span>
                  Génération en cours...
                </span>
              </div>
            }
          </div>
        }
      </div>
    }
  </div>
</div>